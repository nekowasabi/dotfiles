# ==============================================================================
# tmux 共通設定
# 全環境で共有される基本設定
# ==============================================================================

# ------------------------------------------------------------------------------
# ターミナル設定
# ------------------------------------------------------------------------------
set -ga terminal-overrides 'xterm:colors=256'
set -as terminal-features ",gnome*:RGB"
set-option -sa terminal-overrides ",xterm*:Tc"

# ------------------------------------------------------------------------------
# Prefix キー設定
# ------------------------------------------------------------------------------
set -ga prefix ^h
unbind C-b

# ------------------------------------------------------------------------------
# 基本設定
# ------------------------------------------------------------------------------
# ステータスバーを1秒毎に描画し直す
set-option -g status-interval 1

# マウス操作を有効にする
set-option -g mouse on

# ウィンドウ/ペイン番号を1から開始
set-option -g base-index 1

# ESCキーの反応を短くする
set -s escape-time 0

# vim/neovim との連携のためにフォーカスイベントを有効化
set -g focus-events on

# ------------------------------------------------------------------------------
# キーバインド - ペイン操作
# ------------------------------------------------------------------------------
# vimのキーバインドでペインを移動する
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# vimのキーバインドでペインをリサイズする
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# 直前のウィンドウに切り替え
bind C-h last-window

# ------------------------------------------------------------------------------
# ペインボーダー設定（デフォルト）
# ------------------------------------------------------------------------------
set -g pane-border-style fg=green,bg=black
set -g pane-active-border-style fg=white,bg=yellow

# ------------------------------------------------------------------------------
# ステータスバー設定
# ------------------------------------------------------------------------------
set -g status-style bg=default
set -g status-left-length 90
set -g status-right-length 90
set -g status-justify absolute-centre

# ステータスバーの背景色・文字色
set-option -g status-bg "colour238"
set-option -g status-fg "colour255"

# status-left フォーマット
set-option -g status-left "#[fg=colour255,bg=colour241]Session: #S #[default]"

# status-right フォーマット
set -g status-right "#[fg=colour255,bg=colour241] %Y%b-%d %l:%M"

# window-status フォーマット（絵文字付き）
setenv -g FGC colour4
set -g window-status-current-format "#[fg=#{FGC}]#[fg=colour7,bg=#{FGC}]\\[#I:#W\\]#[fg=#{FGC},bg=default]"
set -g window-status-format "#[fg=colour244]#[fg=default,bg=colour244]\\[#I:#W\\]#[fg=colour244,bg=default]"

# ------------------------------------------------------------------------------
# ビジュアル通知
# ------------------------------------------------------------------------------
setw -g monitor-activity on
set -g visual-activity on

# ------------------------------------------------------------------------------
# コピーモード（vi スタイル）
# ------------------------------------------------------------------------------
set-window-option -g mode-keys vi
setw -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
